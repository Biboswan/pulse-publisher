language: node_js
sudo: false
node_js:
- '7'
- '8'
- '10'
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
env:
  global:
  - DEBUG='* -superagent -express:* -mocha:* -babel -eslint*'
  - CXX=g++-4.8
cache:
  yarn: true
  directories:
    - node_modules
notifications:
  irc:
    channels:
    - secure: K3cbtuUTxNzKVPTlWd4/LqvzC2NdbTNGKV6+/L30Suk0BbptY781Iy9RyyDglz07DgCRD83OxH47Uxo9zE48KTmL95mkJAiWB+fLSoLILLUgOq/tDtG41hQB5WMrgyoZD0FNLHzqBzdwDm4SQNcez50dLRmY88orCx9ginpYo8XxVhen3DiO136Lgoh50FeN/7wALfKJIIYZX/3h3/YoqLcwzSV0lq1zs7Ej5sF8H+5gnhETw9C0B2jWiZWCOTBBplIbOcfixv/fDXghDDKs6OSKu6n5ylES2QbJ+Wir9hAXTjSMg1vde8gd5//jJkAM2uawYOxFsqGO+LBJqS++z9SU0ccngwayFynHuFwy5lmrEZdA2Sy08sVq63qY5cDdrr+294h6H1fj2o6H5TsSMr7bmMpE5NqkksMRGlSBzoolfBE78REA/YGsJNc4Ir3zWa1ovR8/kMg23QaK57vP0JuLhLNcJYNC/spXAnlem5lzgqI0S21uh2UptuFpH7u16JnjpMM+kNX0WOddiJ73oB88FNHtumjsrhTjcLnZE/Z6zt9ZcYgm8UPgNEwMFLnTlIrrhdn7G1CZMscosM7oclWLRKdrixY/BDvxMMNSpFInLGcdS2JFDFu1iN/fpJFBr2+mcZTTDhZYq4t1D9ks4DY5xH8CH/hYxXp1MZFxSz4=
    on_success: change
    on_failure: always
    template:
    - "%{repository}#%{build_number} (%{branch} - %{commit} : %{author}): %{message}"
    - 'Change view : %{compare_url}'
    - 'Build details : %{build_url}'
    - 'Commit message : %{commit_message}'
deploy:
  provider: npm
  email: taskcluster-accounts@mozilla.com
  skip_cleanup: true
  api_key:
    secure: pdzC+lFMIy20vLyvgRbK48EuN48NqAgyk2JRNE3ztLYnbu24xnzWcllEDbZISZokGDxb2h7wCDlfe1bsMQoa7OW2Cv3BTWLyFxlUmIFwb4LBgmMJ/1qlS67y83754h0Kkj72hQ1GfAhupXPPyzQ0KGq4ya/zuh70dsDBPQZ3PWzldgTS6OHdKaJC7Ik56iDnow0ZkchqcCossllYU3nCvsMGgScg0Im1iGN7bcNv9Zb94ytL7J0fpLcwlGOqhDITFJ4jMFt2viH8upmBdYh/+mbH+0A9BC/XuDPTbv3v+kmjMhp8O+OiiLCZjdSABudLllgy9X76xY39A4NBLzC+mkbVnE3/qjelLNWw0bv8YvGpsAZbeBZC4MIk88EtdPBaWo+mJJ1M2ovyCvaGZLSJCj6hXjLAh/GaD1OXP29Ygxa1Vvy3/XxKDgw2IYj3XYNSA4mN/mhpEjTRHNosx1fwpOhEpkFel053jjcnHIkPZFCpRxuF4Kec+k5Ht16QrR+8FPuSMBti9sBrnuKppYzvcm36AkYh261vc5cEPYD47j6BeeiEIkZoLcfnxqX9r/Nm4ZU1olHB8rllThmbnZXjMga/KpJY3epEQfXgaSSOcrd/DD1vKVgspoHzDBfMRLbLzBKrg3Pp7DbXL45YPqDzrieDgIm+usQHO66kAA+bo2Y=
  on:
    tags: true
    repo: taskcluster/pulse-publisher
